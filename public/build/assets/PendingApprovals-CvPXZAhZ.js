import{r as d,m as C,j as e,L as O}from"./app-3Ds5Ugas.js";import{B as i}from"./createLucideIcon-D09f9KDG.js";import{D as k}from"./data-table-7mP6xRoL.js";import{D as j,a as u,b as v,c as g,d as f}from"./dialog-pNzlA7wU.js";import{L as a}from"./label-DEgNhSqZ.js";import{T as y}from"./textarea-DpQAnGmW.js";import{A as q}from"./app-layout-DT5DLS-H.js";import{f as _}from"./format-CBpsKyOP.js";/* empty css            */import"./table-BwDg-NCB.js";import"./input-Dlgunh1D.js";import"./index-DTU4xmPb.js";import"./index-C0-Rh8YQ.js";import"./admin-layout-KRPrd9IN.js";import"./applicationLogo-naLLS42X.js";const M=[{title:"Dashboard",href:route("dashboard")},{title:"Pending Approvals",href:route("overtime-requests.pending-approvals")}];function U({overtimeRequests:p}){const[r,o]=d.useState(null),[D,t]=d.useState(!1),[R,l]=d.useState(!1),{data:c,setData:m,post:x,processing:n,reset:h}=C({approver_note:""}),N=()=>{r&&x(route("overtime-requests.approve",r.id),{onSuccess:()=>{t(!1),o(null),h()}})},b=()=>{r&&x(route("overtime-requests.reject",r.id),{onSuccess:()=>{l(!1),o(null),h()}})},A=[{accessorKey:"user",header:"Employee",cell:({row:s})=>e.jsxs("span",{children:[s.original.user.first_name," ",s.original.user.last_name]})},{accessorKey:"date",header:"Date",cell:({row:s})=>_(new Date(s.original.date),"MMM d, yyyy")},{accessorKey:"time",header:"Time",cell:({row:s})=>e.jsxs("span",{children:[s.original.start_time," - ",s.original.end_time]})},{accessorKey:"total_hours",header:"Hours"},{accessorKey:"reason",header:"Reason",cell:({row:s})=>e.jsx("span",{className:"block max-w-xs truncate",title:s.original.reason,children:s.original.reason})},{id:"actions",cell:({row:s})=>e.jsx("div",{className:"flex space-x-2",children:e.jsx(i,{variant:"outline",size:"sm",onClick:()=>{o(s.original),t(!0)},children:"Review"})})}];return e.jsxs(q,{breadcrumbs:M,children:[e.jsx(O,{title:"Overtime Approvals"}),e.jsx("div",{className:"my-4 flex items-center justify-between px-5",children:e.jsx("h1",{className:"text-2xl font-semibold",children:"Pending Overtime Approvals"})}),e.jsx("div",{className:"p-6",children:e.jsx(k,{columns:A,data:p.data,links:p.links})}),e.jsx(j,{open:D,onOpenChange:t,children:e.jsxs(u,{className:"sm:max-w-[500px]",children:[e.jsx(v,{children:e.jsx(g,{children:"Review Overtime Request"})}),r&&e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{children:"Employee"}),e.jsxs("p",{className:"text-sm",children:[r.user.first_name," ",r.user.last_name]})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Date"}),e.jsx("p",{className:"text-sm",children:_(new Date(r.date),"MMMM d, yyyy")})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Time"}),e.jsxs("p",{className:"text-sm",children:[r.start_time," - ",r.end_time]})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Total Hours"}),e.jsx("p",{className:"text-sm",children:r.total_hours})]})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Reason"}),e.jsx("p",{className:"text-sm",children:r.reason})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"approver_note",children:"Note"}),e.jsx(y,{id:"approver_note",value:c.approver_note,onChange:s=>m("approver_note",s.target.value),placeholder:"Add your note here...",rows:4})]})]}),e.jsxs(f,{className:"flex space-x-2",children:[e.jsx(i,{variant:"outline",onClick:()=>{l(!0),t(!1)},disabled:n,children:"Reject"}),e.jsx(i,{onClick:N,disabled:n,children:"Approve"})]})]})}),e.jsx(j,{open:R,onOpenChange:l,children:e.jsxs(u,{children:[e.jsx(v,{children:e.jsx(g,{children:"Reject Overtime Request"})}),e.jsxs("div",{className:"py-4",children:[e.jsx(a,{htmlFor:"rejection_note",children:"Reason for Rejection (Required)"}),e.jsx(y,{id:"rejection_note",value:c.approver_note,onChange:s=>m("approver_note",s.target.value),placeholder:"Please provide a reason for rejection...",rows:4})]}),e.jsxs(f,{children:[e.jsx(i,{variant:"outline",onClick:()=>{l(!1),t(!0)},disabled:n,children:"Back"}),e.jsx(i,{variant:"destructive",onClick:b,disabled:n||!c.approver_note,children:"Reject Request"})]})]})})]})}export{U as default};
