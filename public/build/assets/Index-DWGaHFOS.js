import{r as a,K as b,j as e,L as N,$ as m,S as d}from"./app-DjJX563G.js";import{H as S}from"./heading-DTdv5ui1.js";import{B as u}from"./badge-CwxXVCIS.js";import{B as i}from"./createLucideIcon-D933E3G3.js";import{C as D}from"./confirmation-dialog-C-nCidfX.js";import{D as w}from"./data-table-gz2vh7SS.js";import{I as C}from"./input-gwDjpgU_.js";import{A as P}from"./app-layout-BttruBWi.js";import{P as R,T as B}from"./trash-2-DnOZxEvd.js";/* empty css            */import"./dialog-CLP12mSy.js";import"./select-DNVnAs1k.js";import"./index-DRLhT9hV.js";import"./index-BNfy59Gj.js";import"./table--ykkC-tS.js";const T=[{title:"Dashboard",href:route("dashboard")},{title:"Roles",href:route("roles.index")}];function M({roles:h,filters:A}){const[f,o]=a.useState(!1),[t,p]=a.useState(null),[n,l]=a.useState(""),{url:x}=b();a.useEffect(()=>{const s=new URLSearchParams(window.location.search).get("filter[search]");s&&l(s)},[x]);function j(r){r.preventDefault();const s=n.trim()?{"filter[search]":n}:{};d.get(route("roles.index"),s,{preserveState:!0,preserveScroll:!0})}function g(r){p(r),o(!0)}function v(){t&&(d.delete(route("roles.destroy",{role:t.id})),o(!1))}const y=[{accessorKey:"name",header:"Name"},{accessorKey:"permissions",header:"Permissions",cell:({row:r})=>{const s=r.original.permissions||[];return e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.slice(0,3).map(c=>e.jsx(u,{variant:"outline",children:c.name},c.id)),s.length>3&&e.jsxs(u,{variant:"outline",children:["+",s.length-3," more"]})]})}},{id:"actions",header:()=>e.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:r})=>{const s=r.original;return e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(m,{href:route("roles.edit",{role:s.id}),children:e.jsxs(i,{variant:"outline",size:"icon",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Edit"})]})}),e.jsxs(i,{variant:"destructive",size:"icon",onClick:()=>g(s),disabled:s.name==="admin",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Delete"})]})]})}}];return e.jsxs(P,{breadcrumbs:T,children:[e.jsx(N,{title:"Roles"}),e.jsxs("div",{className:"my-4 flex items-center justify-between px-5",children:[e.jsx(S,{title:"Roles",className:"mb-0"}),e.jsx(m,{href:route("roles.create"),children:e.jsx(i,{children:"Create Role"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6 flex w-full items-center justify-end",children:e.jsx("form",{onSubmit:j,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{type:"text",value:n,onChange:r=>l(r.target.value),className:"w-full rounded-md border border-gray-300 px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"Search roles..."}),e.jsx(i,{type:"submit",children:"Search"})]})})}),e.jsx(w,{columns:y,data:h}),e.jsx(D,{title:"Confirm Deletion",description:`Are you sure you want to delete the ${t==null?void 0:t.name} role? This action cannot be undone.`,open:f,onOpenChange:o,onConfirm:v,confirmButtonText:"Delete",confirmButtonVariant:"destructive"})]})]})}export{M as default};
