import{r as i,K as _,j as e,L as S,$ as o,S as m,t as h}from"./app-3Ds5Ugas.js";import{H as b}from"./heading-BmUx_2sw.js";import{B as u}from"./admin-layout-KRPrd9IN.js";import{B as n}from"./createLucideIcon-D09f9KDG.js";import{C as w}from"./confirmation-dialog-C_y6r8OJ.js";import{D}from"./data-table-7mP6xRoL.js";import{I as N}from"./input-Dlgunh1D.js";import{A as L}from"./app-layout-DT5DLS-H.js";import{E as C}from"./eye-BuZzPEgu.js";import{P as A}from"./pencil-DUyNh9Y8.js";import{T as K}from"./trash-2-DQSSqK_3.js";/* empty css            */import"./applicationLogo-naLLS42X.js";import"./index-DTU4xmPb.js";import"./index-C0-Rh8YQ.js";import"./dialog-pNzlA7wU.js";import"./table-BwDg-NCB.js";const U=[{title:"Dashboard",href:route("dashboard")},{title:"User Leave Settings",href:route("user-leave-settings.index")}];function B(s){switch(s){case 1:return"Fixed";case 2:return"Accrual";default:return"Unknown"}}function E(s){if(!s)return"N/A";switch(s){case 1:return"Monthly";case 2:return"Quarterly";case 3:return"Yearly";case 4:return"Bimonthly";case 5:return"Per Minute (Testing)";default:return"Unknown"}}function X({userLeaveSettings:s,filters:P}){const[l,d]=i.useState(""),{url:f}=_(),[p,c]=i.useState(!1),[t,g]=i.useState(null);i.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("filter[search]");a&&d(a)},[f]);function x(r){r.preventDefault();const a=l.trim()?{"filter[search]":l}:{};m.get(route("user-leave-settings.index"),a,{preserveState:!0,preserveScroll:!0})}function v(r){g(r),c(!0)}function y(){t&&(m.delete(route("user-leave-settings.destroy",t.id),{onSuccess:()=>{h.success("User leave setting deleted successfully")},onError:()=>{h.error("Failed to delete user leave setting")}}),c(!1))}const j=[{accessorKey:"user",header:"User",cell:({row:r})=>{const a=r.original.user;return e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[a.first_name," ",a.last_name]}),e.jsx("div",{className:"text-muted-foreground text-sm",children:a.email})]})}},{accessorKey:"leave_settings_template.leave_type.name",header:"Leave Type",cell:({row:r})=>e.jsx(u,{variant:"secondary",children:r.original.leave_settings_template.leave_type.name})},{accessorKey:"leave_settings_template.name",header:"Template"},{accessorKey:"start_date",header:"Start Date",cell:({row:r})=>new Date(r.original.start_date).toLocaleDateString()},{accessorKey:"end_date",header:"End Date",cell:({row:r})=>r.original.end_date?new Date(r.original.end_date).toLocaleDateString():"Ongoing"},{accessorKey:"accrual_type",header:"Accrual Type",cell:({row:r})=>e.jsx(u,{variant:"outline",children:B(r.original.accrual_type)})},{accessorKey:"accrual_frequency",header:"Frequency",cell:({row:r})=>e.jsx(u,{variant:"outline",children:E(r.original.accrual_frequency)})},{accessorKey:"current_balance",header:"Current Balance",cell:({row:r})=>e.jsxs("span",{className:"font-medium",children:[r.original.current_balance," days"]})},{accessorKey:"max_cap",header:"Max Cap",cell:({row:r})=>`${r.original.max_cap} days`},{id:"actions",header:"Actions",cell:({row:r})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx(o,{href:route("user-leave-settings.show",r.original.id),children:e.jsx(C,{className:"h-4 w-4"})})}),e.jsx(n,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx(o,{href:route("user-leave-settings.edit",r.original.id),children:e.jsx(A,{className:"h-4 w-4"})})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>v(r.original),children:e.jsx(K,{className:"h-4 w-4"})})]})}];return e.jsxs(L,{breadcrumbs:U,children:[e.jsx(S,{title:"User Leave Settings"}),e.jsxs("div",{className:"my-4 flex items-center justify-between px-5",children:[e.jsx(b,{title:"User Leave Settings",description:"Manage user-specific leave settings and assignments",className:"mb-0"}),e.jsx(o,{href:route("user-leave-settings.create"),children:e.jsx(n,{children:"Add User Leave Setting"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6 flex w-full items-center justify-end",children:e.jsx("form",{onSubmit:x,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{type:"text",value:l,onChange:r=>d(r.target.value),className:"w-full rounded-md border border-gray-300 px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"Search users, templates, or leave types..."}),e.jsx(n,{type:"submit",children:"Search"})]})})}),e.jsx(D,{columns:j,data:s.data,links:s.links}),e.jsx(w,{title:"Confirm Deletion",description:`Are you sure you want to delete the leave setting for ${t==null?void 0:t.user.first_name} ${t==null?void 0:t.user.last_name}?`,open:p,onOpenChange:c,onConfirm:y,confirmButtonText:"Delete",confirmButtonVariant:"destructive"})]})]})}export{X as default};
