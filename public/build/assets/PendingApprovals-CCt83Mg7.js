import{r as m,m as q,j as e,L}from"./app-C84IgD_F.js";import{B as t}from"./createLucideIcon-1iKnX0P3.js";import{D as M}from"./data-table-DDtK2w68.js";import{D as u,a as v,b as g,c as y,d as f}from"./dialog-Bhfx-s6k.js";import{L as r}from"./label-DtNMNcRI.js";import{T as _}from"./textarea-DvXYkZiG.js";import{A}from"./app-layout-BDvouAMc.js";import{f as c}from"./format-CBpsKyOP.js";/* empty css            */import"./table-tbc7KVXv.js";import"./input-DsAprXuv.js";import"./index-Cw9X1wRV.js";import"./index-BwlO7WIz.js";import"./admin-layout-D-T6yGF_.js";import"./applicationLogo-C_OBQ510.js";const C=[{title:"Dashboard",href:route("dashboard")},{title:"Pending Leave Approvals",href:route("leave-requests.pending-approvals")}];function Q({leaveRequests:p}){const[a,d]=m.useState(null),[R,l]=m.useState(!1),[k,i]=m.useState(!1),{data:o,setData:x,post:h,processing:n,reset:j}=q({remarks:""}),D=()=>{a&&h(route("leave-requests.approve",a.id),{onSuccess:()=>{l(!1),d(null),j()}})},b=()=>{a&&h(route("leave-requests.reject",a.id),{onSuccess:()=>{i(!1),d(null),j()}})},N=[{accessorKey:"user",header:"Employee",cell:({row:s})=>e.jsxs("span",{children:[s.original.user.first_name," ",s.original.user.last_name]})},{accessorKey:"leave_type",header:"Leave Type",cell:({row:s})=>s.original.user_leave_setting.leave_settings_template.leave_type.name},{accessorKey:"period",header:"Period",cell:({row:s})=>e.jsxs("span",{children:[c(new Date(s.original.start_date),"MMM d")," - ",c(new Date(s.original.end_date),"MMM d, yyyy")]})},{accessorKey:"days_requested",header:"Days",cell:({row:s})=>`${s.original.days_requested} days`},{accessorKey:"current_balance",header:"Balance",cell:({row:s})=>`${s.original.user_leave_setting.current_balance} days`},{accessorKey:"reason",header:"Reason",cell:({row:s})=>e.jsx("span",{className:"block max-w-xs truncate",title:s.original.reason,children:s.original.reason})},{id:"actions",cell:({row:s})=>e.jsx("div",{className:"flex space-x-2",children:e.jsx(t,{variant:"outline",size:"sm",onClick:()=>{d(s.original),l(!0)},children:"Review"})})}];return e.jsxs(A,{breadcrumbs:C,children:[e.jsx(L,{title:"Leave Request Approvals"}),e.jsx("div",{className:"my-4 flex items-center justify-between px-5",children:e.jsx("h1",{className:"text-2xl font-semibold",children:"Pending Leave Request Approvals"})}),e.jsx("div",{className:"p-6",children:e.jsx(M,{columns:N,data:p.data,links:p.links})}),e.jsx(u,{open:R,onOpenChange:l,children:e.jsxs(v,{className:"sm:max-w-[500px]",children:[e.jsx(g,{children:e.jsx(y,{children:"Review Leave Request"})}),a&&e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Employee"}),e.jsxs("p",{className:"text-sm",children:[a.user.first_name," ",a.user.last_name]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Leave Type"}),e.jsx("p",{className:"text-sm",children:a.user_leave_setting.leave_settings_template.leave_type.name})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Period"}),e.jsxs("p",{className:"text-sm",children:[c(new Date(a.start_date),"MMM d")," -"," ",c(new Date(a.end_date),"MMM d, yyyy")]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Days Requested"}),e.jsxs("p",{className:"text-sm",children:[a.days_requested," days"]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Current Balance"}),e.jsxs("p",{className:"text-sm",children:[a.user_leave_setting.current_balance," days"]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Reason"}),e.jsx("p",{className:"text-sm",children:a.reason})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"remarks",children:"Remarks"}),e.jsx(_,{id:"remarks",value:o.remarks,onChange:s=>x("remarks",s.target.value),placeholder:"Add your remarks here...",rows:4})]})]}),e.jsxs(f,{className:"flex space-x-2",children:[e.jsx(t,{variant:"outline",onClick:()=>{i(!0),l(!1)},disabled:n,children:"Reject"}),e.jsx(t,{onClick:D,disabled:n,children:"Approve"})]})]})}),e.jsx(u,{open:k,onOpenChange:i,children:e.jsxs(v,{children:[e.jsx(g,{children:e.jsx(y,{children:"Reject Leave Request"})}),e.jsxs("div",{className:"py-4",children:[e.jsx(r,{htmlFor:"rejection_remarks",children:"Reason for Rejection (Required)"}),e.jsx(_,{id:"rejection_remarks",value:o.remarks,onChange:s=>x("remarks",s.target.value),placeholder:"Please provide a reason for rejection...",rows:4})]}),e.jsxs(f,{children:[e.jsx(t,{variant:"outline",onClick:()=>{i(!1),l(!0)},disabled:n,children:"Back"}),e.jsx(t,{variant:"destructive",onClick:b,disabled:n||!o.remarks,children:"Reject Request"})]})]})})]})}export{Q as default};
