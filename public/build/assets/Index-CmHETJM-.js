import{r as a,K as m,j as e,L as b,$ as u,S as f}from"./app-DjJX563G.js";import{H as S}from"./heading-DTdv5ui1.js";import{B as i}from"./createLucideIcon-D933E3G3.js";import{C as w}from"./confirmation-dialog-C-nCidfX.js";import{D}from"./data-table-gz2vh7SS.js";import{I as C}from"./input-gwDjpgU_.js";import{A as U}from"./app-layout-BttruBWi.js";import{P,T as E}from"./trash-2-DnOZxEvd.js";/* empty css            */import"./dialog-CLP12mSy.js";import"./select-DNVnAs1k.js";import"./index-DRLhT9hV.js";import"./index-BNfy59Gj.js";import"./table--ykkC-tS.js";const L=[{title:"Dashboard",href:route("dashboard")},{title:"Users",href:route("users.index")}];function q({users:l,filters:A}){const[n,c]=a.useState(""),{url:h}=m(),[p,o]=a.useState(!1),[s,x]=a.useState(null),j=m().props.auth;a.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("filter[search]");t&&c(t)},[h]);function y(r){r.preventDefault();const t=n.trim()?{"filter[search]":n}:{};f.get(route("users.index"),t,{preserveState:!0,preserveScroll:!0})}function g(r){x(r),o(!0)}function v(){s&&(f.delete(route("users.destroy",{user:s.id})),o(!1))}const N=[{accessorKey:"first_name",header:"First Name"},{accessorKey:"last_name",header:"Last Name"},{accessorKey:"email",header:"Email"},{id:"actions",header:()=>e.jsx("div",{className:"text-right",children:"Actions"}),cell:({row:r})=>{const t=r.original,d=j.user.id===t.id;return e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(u,{href:route("users.edit",{user:t.id}),children:e.jsxs(i,{variant:"outline",size:"icon",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Edit"})]})}),e.jsxs(i,{variant:"destructive",size:"icon",onClick:()=>g(t),disabled:d,title:d?"You cannot delete your own account":"Delete user",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Delete"})]})]})}}];return e.jsxs(U,{breadcrumbs:L,children:[e.jsx(b,{title:"Users"}),e.jsxs("div",{className:"my-4 flex items-center justify-between px-5",children:[e.jsx(S,{title:"Users",className:"mb-0"}),e.jsx(u,{href:route("users.create"),children:e.jsx(i,{children:"Create User"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6 flex w-full items-center justify-end",children:e.jsx("form",{onSubmit:y,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{type:"text",value:n,onChange:r=>c(r.target.value),className:"w-full rounded-md border border-gray-300 px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"Search users..."}),e.jsx(i,{type:"submit",children:"Search"})]})})}),e.jsx(D,{columns:N,data:l.data,links:l.links}),e.jsx(w,{title:"Confirm Deletion",description:`Are you sure you want to delete ${s==null?void 0:s.first_name} ${s==null?void 0:s.last_name}?`,open:p,onOpenChange:o,onConfirm:v,confirmButtonText:"Delete",confirmButtonVariant:"destructive"})]})]})}export{q as default};
