import{r as C,j as e,$ as A}from"./app-C84IgD_F.js";import{B as o}from"./createLucideIcon-1iKnX0P3.js";import{C as S}from"./checkbox-ms9-Q6AU.js";import{I as r}from"./input-DsAprXuv.js";import{S as m,a as t,b as n,c as i,d as u}from"./select-gXvW7wEd.js";import{T as E}from"./admin-layout-D-T6yGF_.js";const d={FIXED:1,ACCRUAL:2},x={MONTHLY:1,QUARTERLY:2,YEARLY:3,BIMONTHLY:4},F={[x.MONTHLY]:12,[x.BIMONTHLY]:6,[x.QUARTERLY]:4,[x.YEARLY]:1},h=100;function M({data:l,setData:s,errors:c,processing:_,submitButtonText:v,onSubmit:y,isEditMode:R=!1,leaveTypes:b,accrualTypes:p,accrualFrequencies:j,statusOptions:g}){C.useEffect(()=>{if(l.accrual_type===d.ACCRUAL&&l.max_cap&&l.accrual_frequency){const a=N(l.accrual_frequency);if(a>0){const f=Number(l.max_cap)/a;s("accrual_amount",Math.round(f*h)/h)}}},[l.max_cap,l.accrual_frequency,l.accrual_type]);const N=a=>F[a]||0;return e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"mb-1 block text-sm",children:"Template Name"}),e.jsx(r,{id:"name",type:"text",className:"w-full rounded-md border border-gray-300 px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none",value:l.name,onChange:a=>s("name",a.target.value)}),c.name&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:c.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"leave_type_id",className:"mb-1 block text-sm",children:"Leave Type"}),e.jsxs(m,{value:String(l.leave_type_id),onValueChange:a=>s("leave_type_id",Number(a)),children:[e.jsx(t,{className:"w-full",children:e.jsx(n,{placeholder:"Select leave type"})}),e.jsx(i,{children:b.map(a=>e.jsx(u,{value:String(a.id),children:a.name},a.id))})]}),c.leave_type_id&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:c.leave_type_id})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"accrual_type",className:"mb-1 block text-sm",children:"Accrual Type"}),e.jsxs(m,{value:String(l.accrual_type),onValueChange:a=>s("accrual_type",Number(a)),children:[e.jsx(t,{className:"w-full",children:e.jsx(n,{placeholder:"Select accrual type"})}),e.jsx(i,{children:p.map(a=>e.jsx(u,{value:String(a.value),children:a.label},a.value))})]}),c.accrual_type&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:c.accrual_type})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"status",className:"mb-1 block text-sm",children:"Status"}),e.jsxs(m,{value:String(l.status),onValueChange:a=>s("status",Number(a)),children:[e.jsx(t,{className:"w-full",children:e.jsx(n,{placeholder:"Select status"})}),e.jsx(i,{children:g.map(a=>e.jsx(u,{value:String(a.value),children:a.label},a.value))})]}),c.status&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:c.status})]}),l.accrual_type===d.FIXED&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"fixed_days",className:"mb-1 block text-sm",children:"Fixed Days"}),e.jsx(r,{id:"fixed_days",type:"number",min:"0",className:"w-full rounded-md border border-gray-300 px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none",value:l.fixed_days,onChange:a=>s("fixed_days",a.target.value?Number(a.target.value):"")}),c.fixed_days&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:c.fixed_days})]}),l.accrual_type===d.ACCRUAL&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"max_cap",className:"mb-1 block text-sm",children:"Maximum Cap"}),e.jsx(r,{id:"max_cap",type:"number",min:"0",className:"w-full rounded-md border border-gray-300 px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none",value:l.max_cap,onChange:a=>s("max_cap",a.target.value?Number(a.target.value):"")}),c.max_cap&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:c.max_cap})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"accrual_frequency",className:"mb-1 block text-sm",children:"Accrual Frequency"}),e.jsxs(m,{value:String(l.accrual_frequency),onValueChange:a=>s("accrual_frequency",Number(a)),children:[e.jsx(t,{className:"w-full",children:e.jsx(n,{placeholder:"Select accrual frequency"})}),e.jsx(i,{children:j.map(a=>e.jsx(u,{value:String(a.value),children:a.label},a.value))})]}),c.accrual_frequency&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:c.accrual_frequency})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"accrual_amount",className:"mb-1 block text-sm",children:"Accrual Amount (Auto-calculated)"}),e.jsx(r,{id:"accrual_amount",type:"number",step:"0.01",min:"0",className:"w-full rounded-md border border-gray-300 bg-gray-50 px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none",value:l.accrual_amount,readOnly:!0}),e.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Calculated as: Maximum Cap รท Frequency periods per year"}),c.accrual_amount&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:c.accrual_amount})]})]}),l.accrual_type!==d.ACCRUAL&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"max_cap",className:"mb-1 block text-sm",children:"Maximum Cap (Optional)"}),e.jsx(r,{id:"max_cap",type:"number",min:"0",className:"w-full rounded-md border border-gray-300 px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none",value:l.max_cap,onChange:a=>s("max_cap",a.target.value?Number(a.target.value):"")}),c.max_cap&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:c.max_cap})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{id:"allow_carry_over",checked:l.allow_carry_over,onCheckedChange:a=>s("allow_carry_over",a)}),e.jsx("label",{htmlFor:"allow_carry_over",className:"text-sm",children:"Allow Carry Over"})]}),c.allow_carry_over&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:c.allow_carry_over})]}),l.allow_carry_over&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"max_carry_over",className:"mb-1 block text-sm",children:"Maximum Carry Over Days"}),e.jsx(r,{id:"max_carry_over",type:"number",min:"0",className:"w-full rounded-md border border-gray-300 px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none",value:l.max_carry_over,onChange:a=>s("max_carry_over",a.target.value?Number(a.target.value):"")}),c.max_carry_over&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:c.max_carry_over})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(A,{href:E("leave-settings-templates.index"),children:e.jsx(o,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(o,{type:"submit",disabled:_,children:v})]})]})}export{M as L};
