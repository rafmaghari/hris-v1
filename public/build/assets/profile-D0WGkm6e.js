import{K as S,r as d,m as y,j as e,L as F,$ as A,S as k}from"./app-DjJX563G.js";import{S as C,H as _}from"./layout-CYN3EjtC.js";import{I as j}from"./input-error-lzWazbZL.js";import{A as w,a as L,b as E,c as P}from"./app-layout-BttruBWi.js";import{B as b}from"./createLucideIcon-D933E3G3.js";import{I as g}from"./input-gwDjpgU_.js";import{L as N}from"./label-C7UnHOxM.js";import{z as $}from"./transition-Bv9AsIPE.js";/* empty css            */import"./heading-DTdv5ui1.js";import"./separator-U0aPbju_.js";import"./index-BNfy59Gj.js";import"./select-DNVnAs1k.js";import"./index-DRLhT9hV.js";const D=[{title:"Profile settings",href:"/settings/profile"}],I=({avatarThumbUrl:p,user:i})=>{const[n,u]=d.useState(null),[m,o]=d.useState(!1),[r,t]=d.useState(null),l=d.useRef(null),f=`${i.first_name} ${i.last_name}`.trim(),c=s=>{s.target.files&&s.target.files[0]&&(u(s.target.files[0]),t(null))},x=async s=>{if(s.preventDefault(),!!n){o(!0),t(null);try{const a=new FormData;a.append("avatar",n),k.post(route("profile.update.avatar"),a,{forceFormData:!0,onSuccess:()=>{l.current&&(l.current.value=""),u(null)},onError:v=>{console.error("Avatar upload error:",v),v.avatar?t(v.avatar):t("An error occurred while uploading the avatar.")},onFinish:()=>{o(!1)}})}catch(a){console.error("Avatar upload error:",a),t("An unexpected error occurred."),o(!1)}}},h=()=>{var s;(s=l.current)==null||s.click()};return e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(L,{className:"h-24 w-24",children:[e.jsx(E,{className:"object-cover",src:p,alt:`${f}'s avatar`}),e.jsx(P,{children:`${i.first_name.charAt(0)}${i.last_name.charAt(0)}`})]})}),e.jsxs("div",{className:"mt-4 sm:mt-0",children:[e.jsx(b,{type:"button",variant:"outline",onClick:h,className:"mr-4",children:"Choose image"}),e.jsx("input",{type:"file",ref:l,className:"hidden",onChange:c,accept:"image/*"}),n&&e.jsxs("span",{className:"text-sm text-neutral-600",children:["Selected: ",n.name]})]})]}),r&&e.jsx("div",{className:"rounded-md bg-red-50 p-4 text-sm text-red-700",children:r}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(b,{type:"submit",disabled:m||!n,children:m?"Uploading...":"Save Avatar"})})]})};function V({mustVerifyEmail:p,status:i,avatarUrl:n,avatarThumbUrl:u,message:m,error:o}){const{auth:r}=S().props;d.useRef(null);const{data:t,setData:l,patch:f,errors:c,processing:x,recentlySuccessful:h}=y({first_name:r.user.first_name,last_name:r.user.last_name,email:r.user.email});y({avatar:null});const s=a=>{a.preventDefault(),f(route("profile.update"),{preserveScroll:!0})};return e.jsxs(w,{breadcrumbs:D,children:[e.jsx(F,{title:"Profile settings"}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(_,{title:"Profile Picture",description:"Update your profile picture"}),m&&e.jsx("div",{className:"rounded-md bg-green-50 p-4 text-sm text-green-700",children:m}),o&&e.jsx("div",{className:"rounded-md bg-red-50 p-4 text-sm text-red-700",children:o}),e.jsx(I,{avatarThumbUrl:u,user:r.user})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(_,{title:"Profile information",description:"Update your name and email address"}),e.jsxs("form",{onSubmit:s,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{htmlFor:"first_name",children:"First name"}),e.jsx(g,{id:"first_name",className:"mt-1 block w-full",value:t.first_name,onChange:a=>l("first_name",a.target.value),required:!0,autoComplete:"given-name",placeholder:"First name"}),e.jsx(j,{className:"mt-2",message:c.first_name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{htmlFor:"last_name",children:"Last name"}),e.jsx(g,{id:"last_name",className:"mt-1 block w-full",value:t.last_name,onChange:a=>l("last_name",a.target.value),required:!0,autoComplete:"family-name",placeholder:"Last name"}),e.jsx(j,{className:"mt-2",message:c.last_name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{htmlFor:"email",children:"Email address"}),e.jsx(g,{id:"email",type:"email",className:"mt-1 block w-full",value:t.email,onChange:a=>l("email",a.target.value),required:!0,autoComplete:"username",placeholder:"Email address"}),e.jsx(j,{className:"mt-2",message:c.email})]}),p&&r.user.email_verified_at===null&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-muted-foreground -mt-4 text-sm",children:["Your email address is unverified."," ",e.jsx(A,{href:route("verification.send"),method:"post",as:"button",className:"text-foreground underline decoration-neutral-300 underline-offset-4 transition-colors duration-300 ease-out hover:decoration-current! dark:decoration-neutral-500",children:"Click here to resend the verification email."})]}),i==="verification-link-sent"&&e.jsx("div",{className:"mt-2 text-sm font-medium text-green-600",children:"A new verification link has been sent to your email address."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{disabled:x,children:"Save Profile"}),e.jsx($,{show:h,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-neutral-600",children:"Saved"})})]})]})]})]})})]})}export{V as default};
