import{r as m,K as M,m as O,j as e,L as T,$ as B,t as l}from"./app-C84IgD_F.js";import{B as E}from"./admin-layout-D-T6yGF_.js";import{B as a}from"./createLucideIcon-1iKnX0P3.js";import{C as F,a as P,b as V,c as H,d as I}from"./card-D2SlVg6H.js";import{D as j,a as u,b as y,c as f,d as v}from"./dialog-Bhfx-s6k.js";import{L as r}from"./label-DtNMNcRI.js";import{T as g}from"./textarea-DvXYkZiG.js";import{A as $}from"./app-layout-BDvouAMc.js";import{getStatusLabel as K,getStatusColor as z}from"./Index-ITPPGn_k.js";import{S as G}from"./square-pen-CQKfuuwQ.js";import{T as J}from"./trash-2-ZHLBnEEk.js";import{f as x}from"./format-CBpsKyOP.js";/* empty css            */import"./applicationLogo-C_OBQ510.js";import"./index-Cw9X1wRV.js";import"./index-BwlO7WIz.js";import"./heading-CjrVVoYU.js";import"./confirmation-dialog-BTm5dm1k.js";import"./data-table-DDtK2w68.js";import"./table-tbc7KVXv.js";import"./input-DsAprXuv.js";import"./eye-DzkxUSW2.js";import"./pencil-C70BpkCf.js";const Q=[{title:"Dashboard",href:route("dashboard")},{title:"Leave Requests",href:route("leave-requests.index")},{title:"View",href:"#"}];function ue({leaveRequest:s,canApprove:C=!1}){const[k,t]=m.useState(!1),[D,i]=m.useState(!1),d=M().props.auth,{data:o,setData:p,post:n,processing:c}=O({remarks:""}),N=()=>{n(route("leave-requests.approve",s.id),{onSuccess:()=>{t(!1),l.success("Leave request approved successfully")}})},w=()=>{n(route("leave-requests.reject",s.id),{onSuccess:()=>{i(!1),l.success("Leave request rejected successfully")}})},L=()=>{confirm("Are you sure you want to cancel this leave request?")&&n(route("leave-requests.cancel",s.id),{onSuccess:()=>{l.success("Leave request cancelled successfully")}})},A=()=>{confirm("Are you sure you want to delete this leave request?")&&n(route("leave-requests.destroy",s.id),{method:"delete",onSuccess:()=>{l.success("Leave request deleted successfully")}})},b=s.status===1&&s.user.id===d.user.id,_=s.status===1&&s.user.id===d.user.id,S=s.status===1&&s.user.id===d.user.id;return e.jsxs($,{breadcrumbs:Q,children:[e.jsx(T,{title:"View Leave Request"}),e.jsxs("div",{className:"my-4 flex items-center justify-between px-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"View Leave Request"}),e.jsx(a,{variant:"outline",onClick:()=>window.history.back(),children:"Back"})]}),e.jsx("div",{className:"p-6",children:e.jsxs(F,{children:[e.jsx(P,{children:e.jsx(V,{children:"Leave Request Details"})}),e.jsx(H,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Employee"}),e.jsxs("p",{className:"text-gray-700",children:[s.user.first_name," ",s.user.last_name]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Status"}),e.jsx(E,{variant:z(s.status),children:K(s.status)})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Leave Type"}),e.jsx("p",{className:"text-gray-700",children:s.user_leave_setting.leave_settings_template.leave_type.name})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Days Requested"}),e.jsxs("p",{className:"font-medium text-gray-700",children:[s.days_requested," days"]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Start Date"}),e.jsx("p",{className:"text-gray-700",children:x(new Date(s.start_date),"MMMM d, yyyy")})]}),e.jsxs("div",{children:[e.jsx(r,{children:"End Date"}),e.jsx("p",{className:"text-gray-700",children:x(new Date(s.end_date),"MMMM d, yyyy")})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(r,{children:"Reason"}),e.jsx("p",{className:"text-gray-700",children:s.reason})]}),s.approver&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(r,{children:"Approved/Rejected By"}),e.jsxs("p",{className:"text-gray-700",children:[s.approver.first_name," ",s.approver.last_name]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Date Processed"}),e.jsx("p",{className:"text-gray-700",children:s.approved_at?x(new Date(s.approved_at),"MMMM d, yyyy"):"-"})]})]}),s.remarks&&e.jsxs("div",{className:"col-span-2",children:[e.jsx(r,{children:"Remarks"}),e.jsx("p",{className:"text-gray-700",children:s.remarks})]})]})}),e.jsxs(I,{className:"flex justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[b&&e.jsx(a,{variant:"outline",asChild:!0,children:e.jsxs(B,{href:route("leave-requests.edit",s.id),children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Edit"]})}),_&&e.jsxs(a,{variant:"outline",onClick:A,children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Delete"]}),S&&e.jsx(a,{variant:"outline",onClick:L,children:"Cancel Request"})]}),e.jsx("div",{className:"flex space-x-2",children:C&&s.status===1&&e.jsxs(e.Fragment,{children:[e.jsx(a,{variant:"outline",onClick:()=>i(!0),children:"Reject"}),e.jsx(a,{onClick:()=>t(!0),children:"Approve"})]})})]})]})}),e.jsx(j,{open:k,onOpenChange:t,children:e.jsxs(u,{children:[e.jsx(y,{children:e.jsx(f,{children:"Approve Leave Request"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{children:"Are you sure you want to approve this leave request?"}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"remarks",children:"Remarks (Optional)"}),e.jsx(g,{id:"remarks",value:o.remarks,onChange:h=>p("remarks",h.target.value),placeholder:"Add any remarks..."})]})]}),e.jsxs(v,{children:[e.jsx(a,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsx(a,{onClick:N,disabled:c,children:c?"Approving...":"Approve"})]})]})}),e.jsx(j,{open:D,onOpenChange:i,children:e.jsxs(u,{children:[e.jsx(y,{children:e.jsx(f,{children:"Reject Leave Request"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{children:"Are you sure you want to reject this leave request?"}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"remarks",children:"Reason for Rejection *"}),e.jsx(g,{id:"remarks",value:o.remarks,onChange:h=>p("remarks",h.target.value),placeholder:"Please provide a reason for rejection...",required:!0})]})]}),e.jsxs(v,{children:[e.jsx(a,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(a,{variant:"destructive",onClick:w,disabled:c||!o.remarks.trim(),children:c?"Rejecting...":"Reject"})]})]})})]})}export{ue as default};
