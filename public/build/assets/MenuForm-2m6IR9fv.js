import{r as i,j as s,a as E}from"./app-DjJX563G.js";import{c as W,a as w,B as N}from"./createLucideIcon-D933E3G3.js";import{C as U}from"./checkbox-SLDZIGJF.js";import{e as q}from"./dialog-CLP12mSy.js";import{I as C}from"./input-gwDjpgU_.js";import{L as b}from"./label-C7UnHOxM.js";import{S as D,a as H,b as X,c as Z,d as k}from"./select-DNVnAs1k.js";/* empty css            */import"./index-DRLhT9hV.js";import"./index-BNfy59Gj.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],J=W("Save",G);function K(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function P(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function _(...e){return t=>{let n=!1;const o=e.map(r=>{const c=P(r,t);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let r=0;r<o.length;r++){const c=o[r];typeof c=="function"?c():P(e[r],null)}}}}function R(...e){return i.useCallback(_(...e),e)}function Q(e,t=[]){let n=[];function o(c,u){const a=i.createContext(u),l=n.length;n=[...n,u];const f=h=>{var v;const{scope:m,children:d,...x}=h,g=((v=m==null?void 0:m[e])==null?void 0:v[l])||a,S=i.useMemo(()=>x,Object.values(x));return s.jsx(g.Provider,{value:S,children:d})};f.displayName=c+"Provider";function p(h,m){var g;const d=((g=m==null?void 0:m[e])==null?void 0:g[l])||a,x=i.useContext(d);if(x)return x;if(u!==void 0)return u;throw new Error(`\`${h}\` must be used within \`${c}\``)}return[f,p]}const r=()=>{const c=n.map(u=>i.createContext(u));return function(a){const l=(a==null?void 0:a[e])||c;return i.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return r.scopeName=e,[o,Y(r,...t)]}function Y(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const o=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(c){const u=o.reduce((a,{useScope:l,scopeName:f})=>{const h=l(c)[`__scope${f}`];return{...a,...h}},{});return i.useMemo(()=>({[`__scope${t.scopeName}`]:u}),[u])}};return n.scopeName=t.scopeName,n}var $=globalThis!=null&&globalThis.document?i.useLayoutEffect:()=>{},ee=E[" useInsertionEffect ".trim().toString()]||$;function te({prop:e,defaultProp:t,onChange:n=()=>{},caller:o}){const[r,c,u]=re({defaultProp:t,onChange:n}),a=e!==void 0,l=a?e:r;{const p=i.useRef(e!==void 0);i.useEffect(()=>{const h=p.current;h!==a&&console.warn(`${o} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=a},[a,o])}const f=i.useCallback(p=>{var h;if(a){const m=ne(p)?p(e):p;m!==e&&((h=u.current)==null||h.call(u,m))}else c(p)},[a,e,c,u]);return[l,f]}function re({defaultProp:e,onChange:t}){const[n,o]=i.useState(e),r=i.useRef(n),c=i.useRef(t);return ee(()=>{c.current=t},[t]),i.useEffect(()=>{var u;r.current!==n&&((u=c.current)==null||u.call(c,n),r.current=n)},[n,r]),[n,o,c]}function ne(e){return typeof e=="function"}function se(e){const t=i.useRef({value:e,previous:e});return i.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function oe(e){const[t,n]=i.useState(void 0);return $(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const c=r[0];let u,a;if("borderBoxSize"in c){const l=c.borderBoxSize,f=Array.isArray(l)?l[0]:l;u=f.inlineSize,a=f.blockSize}else u=e.offsetWidth,a=e.offsetHeight;n({width:u,height:a})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else n(void 0)},[e]),t}function ce(e){const t=ie(e),n=i.forwardRef((o,r)=>{const{children:c,...u}=o,a=i.Children.toArray(c),l=a.find(le);if(l){const f=l.props.children,p=a.map(h=>h===l?i.Children.count(f)>1?i.Children.only(null):i.isValidElement(f)?f.props.children:null:h);return s.jsx(t,{...u,ref:r,children:i.isValidElement(f)?i.cloneElement(f,void 0,p):null})}return s.jsx(t,{...u,ref:r,children:c})});return n.displayName=`${e}.Slot`,n}function ie(e){const t=i.forwardRef((n,o)=>{const{children:r,...c}=n;if(i.isValidElement(r)){const u=de(r),a=ue(c,r.props);return r.type!==i.Fragment&&(a.ref=o?_(o,u):u),i.cloneElement(r,a)}return i.Children.count(r)>1?i.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var ae=Symbol("radix.slottable");function le(e){return i.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===ae}function ue(e,t){const n={...t};for(const o in t){const r=e[o],c=t[o];/^on[A-Z]/.test(o)?r&&c?n[o]=(...a)=>{c(...a),r(...a)}:r&&(n[o]=r):o==="style"?n[o]={...r,...c}:o==="className"&&(n[o]=[r,c].filter(Boolean).join(" "))}return{...e,...n}}function de(e){var o,r;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var fe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],I=fe.reduce((e,t)=>{const n=ce(`Primitive.${t}`),o=i.forwardRef((r,c)=>{const{asChild:u,...a}=r,l=u?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...a,ref:c})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),y="Switch",[pe,_e]=Q(y),[he,me]=pe(y),F=i.forwardRef((e,t)=>{const{__scopeSwitch:n,name:o,checked:r,defaultChecked:c,required:u,disabled:a,value:l="on",onCheckedChange:f,form:p,...h}=e,[m,d]=i.useState(null),x=R(t,j=>d(j)),g=i.useRef(!1),S=m?p||!!m.closest("form"):!0,[v,O]=te({prop:r,defaultProp:c??!1,onChange:f,caller:y});return s.jsxs(he,{scope:n,checked:v,disabled:a,children:[s.jsx(I.button,{type:"button",role:"switch","aria-checked":v,"aria-required":u,"data-state":T(v),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:x,onClick:K(e.onClick,j=>{O(V=>!V),S&&(g.current=j.isPropagationStopped(),g.current||j.stopPropagation())})}),S&&s.jsx(A,{control:m,bubbles:!g.current,name:o,value:l,checked:v,required:u,disabled:a,form:p,style:{transform:"translateX(-100%)"}})]})});F.displayName=y;var z="SwitchThumb",B=i.forwardRef((e,t)=>{const{__scopeSwitch:n,...o}=e,r=me(z,n);return s.jsx(I.span,{"data-state":T(r.checked),"data-disabled":r.disabled?"":void 0,...o,ref:t})});B.displayName=z;var xe="SwitchBubbleInput",A=i.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:o=!0,...r},c)=>{const u=i.useRef(null),a=R(u,c),l=se(n),f=oe(t);return i.useEffect(()=>{const p=u.current;if(!p)return;const h=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&d){const x=new Event("click",{bubbles:o});d.call(p,n),p.dispatchEvent(x)}},[l,n,o]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:a,style:{...r.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});A.displayName=xe;function T(e){return e?"checked":"unchecked"}var M=F,ge=B;const L=i.forwardRef(({className:e,...t},n)=>s.jsx(M,{className:w("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:s.jsx(ge,{className:w("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));L.displayName=M.displayName;function Re({isEdit:e,initialData:t,permissions:n,allMenus:o,selectedMenu:r,isSubmitting:c,onCancel:u,onSubmit:a}){const[l,f]=i.useState(t),[p,h]=i.useState(t.parent_id?t.parent_id.toString():"null");i.useEffect(()=>{f(t),h(t.parent_id?t.parent_id.toString():"null")},[t]);const m=d=>{d.preventDefault(),a(l,e)};return s.jsxs("form",{onSubmit:m,children:[s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsxs(b,{htmlFor:`${e?"edit-":""}name`,className:"text-right",children:["Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(C,{id:`${e?"edit-":""}name`,value:l.name,onChange:d=>f({...l,name:d.target.value}),className:"col-span-3",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsxs(b,{htmlFor:`${e?"edit-":""}slug`,className:"text-right",children:["Slug ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(C,{id:`${e?"edit-":""}slug`,value:l.slug,onChange:d=>f({...l,slug:d.target.value}),className:"col-span-3",placeholder:"e.g., dashboard-settings",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(b,{htmlFor:`${e?"edit-":""}url`,className:"text-right",children:"URL"}),s.jsx(C,{id:`${e?"edit-":""}url`,value:l.url,onChange:d=>f({...l,url:d.target.value}),className:"col-span-3",placeholder:"e.g., /dashboard/users"})]}),(!e||e&&r)&&s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(b,{htmlFor:`${e?"edit-":""}parent`,className:"text-right",children:"Parent Menu"}),s.jsxs(D,{onValueChange:d=>{h(d),f({...l,parent_id:d==="null"?null:parseInt(d)})},value:p,children:[s.jsx(H,{className:"col-span-3",children:s.jsx(X,{placeholder:"Select a parent menu (optional)"})}),s.jsxs(Z,{children:[s.jsx(k,{value:"null",children:"None (Top Level)"}),o.filter(d=>e?d.id!==(r==null?void 0:r.id):!0).map(d=>s.jsx(k,{value:d.id.toString(),children:d.name},d.id))]})]})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(b,{htmlFor:`${e?"edit-":""}is_active`,className:"text-right",children:"Active"}),s.jsx("div",{className:"col-span-3 flex items-center",children:s.jsx(L,{id:`${e?"edit-":""}is_active`,checked:l.is_active,onCheckedChange:d=>f({...l,is_active:d})})})]}),s.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[s.jsx(b,{htmlFor:`${e?"edit-":""}permissions`,className:"text-right",children:"Permissions"}),s.jsx("div",{className:"col-span-3 space-y-2",children:s.jsx("div",{className:"max-h-[200px] overflow-y-auto pr-2",children:s.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.map(d=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(U,{id:`${e?"edit-":""}permission-${d.id}`,checked:l.permissions.includes(d.id),onCheckedChange:x=>{f(x?{...l,permissions:[...l.permissions,d.id]}:{...l,permissions:l.permissions.filter(g=>g!==d.id)})}}),s.jsx("label",{htmlFor:`${e?"edit-":""}permission-${d.id}`,className:"text-sm leading-none font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:d.name})]},d.id))})})})]})]}),s.jsxs(q,{children:[s.jsx(N,{type:"button",variant:"outline",onClick:u,disabled:c,children:"Cancel"}),s.jsx(N,{type:"submit",disabled:c,children:c?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsxs("svg",{className:"mr-2 -ml-1 h-4 w-4 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e?"Updating...":"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(J,{className:"mr-2 h-4 w-4"}),e?"Update Menu":"Save Menu"]})})]})]})}export{Re as default};
