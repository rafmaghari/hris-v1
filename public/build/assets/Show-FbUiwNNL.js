import{r as p,m as D,j as e,L as w}from"./app-3Ds5Ugas.js";import{B as A}from"./admin-layout-KRPrd9IN.js";import{B as a}from"./createLucideIcon-D09f9KDG.js";import{C as O,a as k,b as M,c as S,d as F}from"./card-N5NlBDpJ.js";import{D as x,a as h,b as j,c as m,d as v}from"./dialog-pNzlA7wU.js";import{L as r}from"./label-DEgNhSqZ.js";import{T as u}from"./textarea-DpQAnGmW.js";import{A as L}from"./app-layout-DT5DLS-H.js";import{getStatusLabel as T,getStatusColor as B}from"./Index-CHdQrDo3.js";import{f as g}from"./format-CBpsKyOP.js";/* empty css            */import"./applicationLogo-naLLS42X.js";import"./index-DTU4xmPb.js";import"./index-C0-Rh8YQ.js";import"./heading-BmUx_2sw.js";import"./data-table-7mP6xRoL.js";import"./table-BwDg-NCB.js";import"./input-Dlgunh1D.js";import"./eye-BuZzPEgu.js";import"./pencil-DUyNh9Y8.js";const E=[{title:"Dashboard",href:route("dashboard")},{title:"Overtime Requests",href:route("overtime-requests.index")},{title:"View",href:"#"}];function ae({overtimeRequest:s,canApprove:f}){const[y,i]=p.useState(!1),[C,t]=p.useState(!1),{data:c,setData:d,post:l,processing:n}=D({approver_note:""}),N=()=>{l(route("overtime-requests.approve",s.id),{onSuccess:()=>i(!1)})},_=()=>{l(route("overtime-requests.reject",s.id),{onSuccess:()=>t(!1)})},b=()=>{confirm("Are you sure you want to cancel this overtime request?")&&l(route("overtime-requests.cancel",s.id))};return e.jsxs(L,{breadcrumbs:E,children:[e.jsx(w,{title:"View Overtime Request"}),e.jsxs("div",{className:"my-4 flex items-center justify-between px-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"View Overtime Request"}),e.jsx(a,{variant:"outline",onClick:()=>window.history.back(),children:"Back"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs(O,{children:[e.jsx(k,{children:e.jsx(M,{children:"Overtime Request Details"})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Employee"}),e.jsxs("p",{className:"text-gray-700",children:[s.user.first_name," ",s.user.last_name]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Status "}),e.jsx(A,{variant:B(s.status),children:T(s.status)})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Date"}),e.jsx("p",{className:"text-gray-700",children:g(new Date(s.date),"MMMM d, yyyy")})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Time"}),e.jsxs("p",{className:"text-gray-700",children:[s.start_time," - ",s.end_time]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Total Hours"}),e.jsx("p",{className:"text-gray-700",children:s.total_hours})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Reason"}),e.jsx("p",{className:"text-gray-700",children:s.reason})]})]}),s.approver&&e.jsxs("div",{className:"mt-6 border-t pt-6",children:[e.jsx("h3",{className:"mb-4 font-semibold",children:"Approval Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Approver"}),e.jsxs("p",{className:"text-gray-700",children:[s.approver.first_name," ",s.approver.last_name]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Approved At"}),e.jsx("p",{className:"text-gray-700",children:s.approved_at&&g(new Date(s.approved_at),"MMMM d, yyyy")})]}),s.approver_note&&e.jsxs("div",{className:"col-span-2",children:[e.jsx(r,{children:"Note"}),e.jsx("p",{className:"text-gray-700",children:s.approver_note})]})]})]})]}),e.jsx(F,{className:"flex justify-end space-x-2",children:s.status===1&&e.jsxs(e.Fragment,{children:[f&&e.jsxs(e.Fragment,{children:[e.jsx(a,{onClick:()=>i(!0),children:"Approve"}),e.jsx(a,{variant:"destructive",onClick:()=>t(!0),children:"Reject"})]}),s.user.id===window.auth.user.id&&e.jsx(a,{variant:"outline",onClick:b,children:"Cancel Request"})]})})]}),e.jsx(x,{open:y,onOpenChange:i,children:e.jsxs(h,{children:[e.jsx(j,{children:e.jsx(m,{children:"Approve Overtime Request"})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(r,{htmlFor:"approver_note",children:"Note (Optional)"}),e.jsx(u,{id:"approver_note",value:c.approver_note,onChange:o=>d("approver_note",o.target.value),rows:4})]})}),e.jsxs(v,{children:[e.jsx(a,{variant:"outline",onClick:()=>i(!1),disabled:n,children:"Cancel"}),e.jsx(a,{onClick:N,disabled:n,children:"Approve"})]})]})}),e.jsx(x,{open:C,onOpenChange:t,children:e.jsxs(h,{children:[e.jsx(j,{children:e.jsx(m,{children:"Reject Overtime Request"})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(r,{htmlFor:"approver_note",children:"Reason for Rejection"}),e.jsx(u,{id:"approver_note",value:c.approver_note,onChange:o=>d("approver_note",o.target.value),rows:4})]})}),e.jsxs(v,{children:[e.jsx(a,{variant:"outline",onClick:()=>t(!1),disabled:n,children:"Cancel"}),e.jsx(a,{variant:"destructive",onClick:_,disabled:n,children:"Reject"})]})]})})]})]})}export{ae as default};
