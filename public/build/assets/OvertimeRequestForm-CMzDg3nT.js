import{m as _,r as j,j as a}from"./app-C84IgD_F.js";import{B as m}from"./createLucideIcon-1iKnX0P3.js";import{C as N,a as f,b as u,c as g,d as C}from"./card-D2SlVg6H.js";import{I as l}from"./input-DsAprXuv.js";import{L as n}from"./label-DtNMNcRI.js";import{T as b}from"./textarea-DvXYkZiG.js";function H({overtimeRequest:t,mode:i}){const{data:r,setData:d,post:o,put:x,processing:c,errors:s}=_({date:(t==null?void 0:t.date)||"",start_time:(t==null?void 0:t.start_time)||"",end_time:(t==null?void 0:t.end_time)||"",reason:(t==null?void 0:t.reason)||"",total_hours:(t==null?void 0:t.total_hours)||0});j.useEffect(()=>{if(r.start_time&&r.end_time){const e=new Date(`2000-01-01 ${r.start_time}`),p=(new Date(`2000-01-01 ${r.end_time}`).getTime()-e.getTime())/(1e3*60*60);d("total_hours",Math.max(0,p))}},[r.start_time,r.end_time]);const h=e=>{e.preventDefault(),i==="create"?o(route("overtime-requests.store")):x(route("overtime-requests.update",t==null?void 0:t.id))};return a.jsx("form",{onSubmit:h,children:a.jsxs(N,{children:[a.jsx(f,{children:a.jsx(u,{children:i==="create"?"Create Overtime Request":"Edit Overtime Request"})}),a.jsxs(g,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(n,{htmlFor:"date",children:"Date"}),a.jsx(l,{id:"date",type:"date",value:r.date,onChange:e=>d("date",e.target.value),className:s.date?"border-red-500":""}),s.date&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.date})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(n,{htmlFor:"start_time",children:"Start Time"}),a.jsx(l,{id:"start_time",type:"time",value:r.start_time,onChange:e=>d("start_time",e.target.value),className:s.start_time?"border-red-500":""}),s.start_time&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.start_time})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(n,{htmlFor:"end_time",children:"End Time"}),a.jsx(l,{id:"end_time",type:"time",value:r.end_time,onChange:e=>d("end_time",e.target.value),className:s.end_time?"border-red-500":""}),s.end_time&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.end_time})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(n,{htmlFor:"total_hours",children:"Total Hours"}),a.jsx(l,{id:"total_hours",type:"number",step:"0.5",min:"0.5",max:"24",value:r.total_hours,onChange:e=>d("total_hours",parseFloat(e.target.value)),className:s.total_hours?"border-red-500":""}),s.total_hours&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.total_hours})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(n,{htmlFor:"reason",children:"Reason"}),a.jsx(b,{id:"reason",value:r.reason,onChange:e=>d("reason",e.target.value),rows:4,className:s.reason?"border-red-500":""}),s.reason&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.reason})]})]}),a.jsxs(C,{className:"flex justify-end space-x-2",children:[a.jsx(m,{type:"button",variant:"outline",onClick:()=>window.history.back(),disabled:c,children:"Cancel"}),a.jsxs(m,{type:"submit",disabled:c,children:[i==="create"?"Create":"Update"," Request"]})]})]})})}export{H as O};
