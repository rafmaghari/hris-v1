import{r as h,j as e,a as P,m as k,L as w,$ as M}from"./app-3Ds5Ugas.js";import{B as v}from"./createLucideIcon-D09f9KDG.js";import{C as R}from"./card-N5NlBDpJ.js";import{C as p}from"./checkbox-BYy07ju-.js";import{S as u,a as j,b as f,c as g,d as b}from"./select-CPBprour.js";import{T as i}from"./admin-layout-KRPrd9IN.js";import{H as F}from"./heading-BmUx_2sw.js";import{A as $}from"./app-layout-DT5DLS-H.js";/* empty css            */import"./check-C9P8Vgop.js";import"./index-DTU4xmPb.js";import"./index-C0-Rh8YQ.js";import"./applicationLogo-naLLS42X.js";function E({data:r,setData:n,errors:a,processing:m,onSubmit:o,groups:S,events:N}){const[c,d]=h.useState([]),[x,C]=h.useState(!1),_=async s=>{if(n("group_id",s),s)try{const l=await P.get(i("attendances.members",{group_id:s}));d(l.data),n("members",l.data.map(t=>({id:t.id,isPresent:!1})))}catch(l){console.error("Failed to fetch members:",l)}else d([]),n("members",[])},y=s=>{const l=c.map(t=>t.id===s?{...t,isPresent:!t.isPresent}:t);d(l),n("members",l.map(t=>({id:t.id,isPresent:t.isPresent})))},A=()=>{const s=!x;C(s);const l=c.map(t=>({...t,isPresent:s}));d(l),n("members",l.map(t=>({id:t.id,isPresent:t.isPresent})))};return e.jsx("form",{onSubmit:o,children:e.jsxs(R,{className:"space-y-4 p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Select Group"}),e.jsxs(u,{value:r.group_id?String(r.group_id):"",onValueChange:_,children:[e.jsx(j,{className:"w-full",children:e.jsx(f,{placeholder:"Select a group"})}),e.jsx(g,{children:S.map(s=>e.jsx(b,{value:String(s.value),children:s.label},s.value))})]}),a.group_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.group_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Select Event"}),e.jsxs(u,{value:r.event_id?String(r.event_id):"",onValueChange:s=>n("event_id",s),children:[e.jsx(j,{className:"w-full",children:e.jsx(f,{placeholder:"Select an event"})}),e.jsx(g,{children:N.map(s=>e.jsx(b,{value:String(s.value),children:s.label},s.value))})]}),a.event_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.event_id})]})]}),c.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"select-all",checked:x,onCheckedChange:A}),e.jsx("label",{htmlFor:"select-all",className:"text-sm font-medium",children:"Select All (Selected Members will be marked as Present)"})]}),e.jsx("div",{className:"space-y-2",children:c.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:`member-${s.id}`,checked:s.isPresent,onCheckedChange:()=>y(s.id)}),e.jsx("label",{htmlFor:`member-${s.id}`,className:"text-sm font-medium",children:s.name})]},s.id))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(v,{type:"submit",disabled:m,children:"Record Attendance"})})]})})}const L=[{title:"Dashboard",href:i("dashboard")},{title:"Attendances",href:i("attendances.index")},{title:"Record",href:i("attendances.create")}];function W({groups:r,events:n}){const a=k({group_id:"",event_id:"",members:[],notes:""}),m=o=>{o.preventDefault(),a.post(i("attendances.store"))};return e.jsxs($,{breadcrumbs:L,children:[e.jsx(w,{title:"Record Attendance"}),e.jsxs("div",{className:"my-4 flex items-center justify-between px-5",children:[e.jsx("div",{children:e.jsx(F,{title:"Record Attendance",className:"mb-0"})}),e.jsx(M,{href:i("attendances.index"),children:e.jsx(v,{variant:"outline",children:"Cancel"})})]}),e.jsx("div",{className:"p-6",children:e.jsx(E,{data:a.data,setData:a.setData,errors:a.errors,processing:a.processing,onSubmit:m,groups:r,events:n})})]})}export{W as default};
