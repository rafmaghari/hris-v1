import{r as n,K as h,j as e,L as N,$ as l,S as f,t as p}from"./app-3Ds5Ugas.js";import{H as b}from"./heading-BmUx_2sw.js";import{B as x}from"./admin-layout-KRPrd9IN.js";import{B as a}from"./createLucideIcon-D09f9KDG.js";import{C}from"./confirmation-dialog-C_y6r8OJ.js";import{D as L}from"./data-table-7mP6xRoL.js";import{I as M}from"./input-Dlgunh1D.js";import{A as E}from"./app-layout-DT5DLS-H.js";import{E as K}from"./eye-BuZzPEgu.js";import{P as R}from"./pencil-DUyNh9Y8.js";import{T as P}from"./trash-2-DQSSqK_3.js";import{f as c}from"./format-CBpsKyOP.js";/* empty css            */import"./applicationLogo-naLLS42X.js";import"./index-DTU4xmPb.js";import"./index-C0-Rh8YQ.js";import"./dialog-pNzlA7wU.js";import"./table-BwDg-NCB.js";const T=[{title:"Dashboard",href:route("dashboard")},{title:"Leave Requests",href:route("leave-requests.index")}],B=r=>{switch(r){case 1:return"secondary";case 2:return"default";case 3:return"destructive";case 4:return"outline";default:return"secondary"}},A=r=>{switch(r){case 1:return"Pending";case 2:return"Approved";case 3:return"Rejected";case 4:return"Cancelled";default:return"Pending"}};function re({leaveRequests:r,filters:k}){const[i,d]=n.useState(""),{url:y}=h(),u=h().props.auth,[v,o]=n.useState(!1),[m,g]=n.useState(null);n.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("filter[search]");t&&d(t)},[y]);function j(s){s.preventDefault();const t=i.trim()?{"filter[search]":i}:{};f.get(route("leave-requests.index"),t,{preserveState:!0,preserveScroll:!0})}function _(s){g(s),o(!0)}function q(){m&&(f.delete(route("leave-requests.destroy",m.id),{onSuccess:()=>{p.success("Leave request deleted successfully")},onError:()=>{p.error("Failed to delete leave request")}}),o(!1))}const D=[{accessorKey:"user",header:"Employee",cell:({row:s})=>{const t=s.original.user;return e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[t.first_name," ",t.last_name]}),e.jsx("div",{className:"text-muted-foreground text-sm",children:t.email})]})}},{accessorKey:"user_leave_setting.leave_settings_template.leave_type.name",header:"Leave Type",cell:({row:s})=>e.jsx(x,{variant:"secondary",children:s.original.user_leave_setting.leave_settings_template.leave_type.name})},{accessorKey:"start_date",header:"Start Date",cell:({row:s})=>c(new Date(s.original.start_date),"MMM dd, yyyy")},{accessorKey:"end_date",header:"End Date",cell:({row:s})=>c(new Date(s.original.end_date),"MMM dd, yyyy")},{accessorKey:"days_requested",header:"Days",cell:({row:s})=>e.jsxs("span",{className:"font-medium",children:[s.original.days_requested," days"]})},{accessorKey:"reason",header:"Reason",cell:({row:s})=>{const t=s.original.reason;return e.jsx("div",{className:"max-w-[200px] truncate",title:t,children:t})}},{accessorKey:"status",header:"Status",cell:({row:s})=>e.jsx(x,{variant:B(s.original.status),children:A(s.original.status)})},{accessorKey:"created_at",header:"Requested",cell:({row:s})=>c(new Date(s.original.created_at),"MMM dd, yyyy")},{id:"actions",header:"Actions",cell:({row:s})=>{const t=s.original,S=t.status===1&&t.user.id===u.user.id,w=t.status===1&&t.user.id===u.user.id;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx(l,{href:route("leave-requests.show",t.id),children:e.jsx(K,{className:"h-4 w-4"})})}),S&&e.jsx(a,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx(l,{href:route("leave-requests.edit",t.id),children:e.jsx(R,{className:"h-4 w-4"})})}),w&&e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>_(t),children:e.jsx(P,{className:"h-4 w-4"})})]})}}];return e.jsxs(E,{breadcrumbs:T,children:[e.jsx(N,{title:"Leave Requests"}),e.jsxs("div",{className:"my-4 flex items-center justify-between px-5",children:[e.jsx(b,{title:"Leave Requests",description:"Manage employee leave requests and approvals",className:"mb-0"}),e.jsx(l,{href:route("leave-requests.create"),children:e.jsx(a,{children:"Request Leave"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6 flex w-full items-center justify-end",children:e.jsx("form",{onSubmit:j,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{type:"text",value:i,onChange:s=>d(s.target.value),className:"w-full rounded-md border border-gray-300 px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"Search employees, leave types, or reasons..."}),e.jsx(a,{type:"submit",children:"Search"})]})})}),e.jsx(L,{columns:D,data:r.data,links:r.links}),e.jsx(C,{title:"Confirm Deletion",description:"Are you sure you want to delete this leave request?",open:v,onOpenChange:o,onConfirm:q,confirmButtonText:"Delete",confirmButtonVariant:"destructive"})]})]})}export{re as default,B as getStatusColor,A as getStatusLabel};
